<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mohd Aatif Smart AI</title>
<style>
:root {
  --bg: #131314;
  --side: #1e1f20;
  --border: #ffd700;
  --blue: #8ab4f8;
}
body, html {
  margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; height: 100vh; background: var(--bg); color: #e3e3e3;
  display: flex; justify-content: center; align-items: center;
}
.wrapper {
  border: 4px solid var(--border); border-radius: 20px;
  width: 95%; max-width: 800px; height: 90%; display: flex; flex-direction: column;
  overflow: hidden; background: #1a1a1b;
}
.top-nav {
  display: flex; align-items: center; justify-content: space-between; padding: 15px 20px;
  border-bottom: 2px solid var(--border);
}
.top-nav b { color: var(--blue); font-size: 20px; }
.top-nav img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--border); }
#chatBox {
  flex: 1; padding: 20px; overflow-y: auto; scroll-behavior: smooth;
}
.msg { margin-bottom: 20px; font-size: 16px; line-height: 1.5; }
.label { font-size: 12px; color: var(--blue); font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
.input-area { padding: 15px 20px; border-top: 2px solid var(--border); display: flex; }
.input-area input {
  flex: 1; padding: 10px 15px; border-radius: 25px; border: 1px solid var(--border);
  background: #1e1f20; color: white; font-size: 16px; outline: none;
}
.input-area button {
  margin-left: 10px; padding: 10px 20px; border: none; border-radius: 25px;
  background: var(--blue); color: #000; font-weight: bold; cursor: pointer;
}
</style>
</head>
<body>

<div class="wrapper">
  <div class="top-nav">
    <b>Mohd Aatif Smart AI</b>
    <img src="https://i.postimg.cc/bJMkPCSv/1000066557.jpg" alt="DP">
  </div>
  <div id="chatBox">
    <div class="msg">
      <div class="label">System Ready</div>
      Welcome! I am Mohd Aatif Smart AI. Ask me anything.
    </div>
  </div>
  <div class="input-area">
    <input type="text" id="uInp" placeholder="Type your question..." onkeypress="if(event.key==='Enter') talk()">
    <button onclick="talk()">Send</button>
  </div>
</div>

<script>
async function talk() {
  const input = document.getElementById('uInp');
  const chatBox = document.getElementById('chatBox');
  const question = input.value.trim();
  if(!question) return;

  // User message
  chatBox.innerHTML += `<div style="text-align:right;"><span class="msg" style="background:#333537;padding:10px 15px;border-radius:20px;">${question}</span></div>`;
  chatBox.scrollTop = chatBox.scrollHeight;
  input.value = '';

  // Call backend API
  try {
    const response = await fetch('/ask', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ question })
    });
    const data = await response.json();

    chatBox.innerHTML += `<div class="msg"><div class="label">Response</div>${data.answer}</div>`;
    chatBox.scrollTop = chatBox.scrollHeight;

    // Optional: Speak in Hindi
    const utter = new SpeechSynthesisUtterance(data.answer_hindi);
    utter.lang = 'hi-IN';
    window.speechSynthesis.speak(utter);

  } catch(err) {
    chatBox.innerHTML += `<div class="msg"><div class="label">Error</div>Something went wrong!</div>`;
  }
}
</script>

</body>
</html>
